ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsKICAgIC8vIFNtb290aCBzY3JvbGxpbmcgZm9yIGFuY2hvciBsaW5rcwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXj0iIyJdJykuZm9yRWFjaChhbmNob3IgPT4gewogICAgICAgIGFuY2hvci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgY29uc3QgdGFyZ2V0SWQgPSB0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpOwogICAgICAgICAgICBpZiAodGFyZ2V0SWQgPT09ICcjJykgcmV0dXJuOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0SWQpOwogICAgICAgICAgICBpZiAodGFyZ2V0RWxlbWVudCkgewogICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zY3JvbGxJbnRvVmlldyh7CiAgICAgICAgICAgICAg      ICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSk7CgogICAgLy8gU2ltcGxlIGFuaW1hdGlvbiBmb3IgZmVhdHVyZSBjYXJkcyBvbiBzY3JvbGwKICAgIGNvbnN0IG9ic2VydmVyT3B0aW9ucyA9IHsKICAg     ICAgICB0aHJlc2hvbGQ6IDAuMQogICAgfTsKCiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4gewogICAg    ZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHsKICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgICAgICBlbnRyeS50YXJnZXQuc3R5bGUub3BhY2l0eSA9ICcxJzsKICAgICAgICAgICAgICAgIGVudHJ5LnRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7CiAgICAgICAgICAg     ICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwgb2JzZXJ2ZXJPcHRpb25zKTsKCiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmVhdHVyZS1jYXJkJykuZm9yRWFjaCgoY2FyZCwgaW5kZXgpID0+IHsKICAgICAgICBjYXJkLnN0eWxlLm9wYWNpdHkgPSAnMCc7CiAgICAgICAgY2FyZC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgyMHB4KSc7CiAgICAgICAgY2FyZC5zdHlsZS50cmFuc2l0aW9uID0gYG9wYWNpdHkgMC41cyBlYXNlLCB0cmFuc2Zvcm0gMC41cyBlYXNlICR7aW5kZXggKiAwLjF9c2A7CiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShjYXJkKTsKICAgIH0pOwp9KTs=